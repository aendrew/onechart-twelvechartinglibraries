<!DOCTYPE html>
<html>
  <head>
    <style>

    circle {
      fill: black;
      opacity:0.7;
    }

    </style>
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/c3/0.4.11/c3.min.css" media="screen">
    <script type="text/javascript" src="//d3js.org/d3.v3.min.js" charset="utf-8"></script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/c3/0.4.11/c3.min.js"></script>
  </head>
  <body>
    <div id="chart"></div>
    <script type="text/javascript">
    // load data
    var data = d3.csv("data.csv", function(error, data) {
      var size = d3.scale.linear()
        .domain([
          d3.min(data, function(d) {
            return Number(d.population); // need to coerce string variable into number.
          }),
          d3.max(data, function(d) {
            return Number(d.population); // same here.
          })
        ])
        .range([2, 40]);

      c3.generate({
        data: {
          json: data,
          keys: {
            value: [
              'income',
              'health',
            ]
          },
          type: 'scatter',
          x: 'income',
          axes: {
            health: 'y'
          }
        },
        point: {
          r: function(d) {
            return size(data[d.index].population);
          }
        },
        tooltip: {
          format: {
            title: function(){ return; },
            name: function(name, ratio, id, index) {
              return data[index].country;
            }
          }
        }
      });
    });
    </script>
  </body>
</html>
